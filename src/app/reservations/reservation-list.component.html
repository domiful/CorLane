<ActionBar class="action-bar">
    <!-- Should remove the navigation button -->
    <NavigationButton ios:visibility="collapsed" icon="res://menu" (tap)="onDrawerButtonTap()"></NavigationButton>
    <Label class="action-bar-title" text="Reservations" horizontalAlignment="center"></Label>
    <ActionItem icon="res://navigation/menu" android:visibility="collapsed" (tap)="onDrawerButtonTap()"
        ios.position="left">
    </ActionItem>
    <ActionItem (tap)="onNavItemTap('reservations/reservation-detail-edit')" ios.systemIcon="4"
        android.systemIcon="ic_menu_add" ios.position="right" visibility="visible"></ActionItem>
    <Label class="action-bar-title" text="Reservations"></Label>
</ActionBar>

<GridLayout class="page page-content">
    <RadListView [items]="reservations" class="list-group">
        <!--
    RadListView is a UI component part of the Progress NativeScript UI set of components.
    Learn more about the RadListView UI component and how it can be customized in this documentation article:
    https://docs.nativescript.org/angular/ui/professional-ui-components/ng-ListView/getting-started
    This component is used to display the master list in the master-detail structure.
    -->
        <ng-template tkListItemTemplate let-reservation="item">
            <StackLayout class="list-group-item">
                <GridLayout rows="*, *, *, *, *, *" columns="*, *" class="list-group-item-content">
                    <Label [text]="reservation.name" class="text-primary font-weight-bold"></Label>
                    <Label col="1" horizontalAlignment="right" class="list-group-item-text m-r-5">
                        <FormattedString>
                            <Span [text]="reservation.date"></Span>
                        </FormattedString>
                    </Label>

                    <StackLayout row="1" class="hr-light m-t-5 m-b-5" colSpan="2"></StackLayout>

                    <Image row="2" [src]="reservation.imageUrl" stretch="aspectFill" height="120" class="m-r-20">
                    </Image>
                    <StackLayout row="2" col="1" verticalAlignment="center" class="list-group-item-text">
                        <Label class="p-b-10">
                            <!-- set fontFamily="system" to workaround "Service exited due to Segmentation fault: 11" error -->
                            <FormattedString ios:fontFamily="system">
                                <Span text="Time:   " class="fa text-primary"></Span>
                                <Span [text]="reservation.time"></Span>
                            </FormattedString>
                        </Label>
                        <Label class="p-b-10">
                            <!-- set fontFamily="system" to workaround "Service exited due to Segmentation fault: 11" error -->
                            <FormattedString ios:fontFamily="system">
                                <Span text="Party Members:   " class="fa text-primary"></Span>
                                <Span [text]="reservation.party"></Span>
                            </FormattedString>
                        </Label>
                    </StackLayout>
                    <StackLayout row="3" class="hr-light m-t-5 m-b-5" colSpan="2"></StackLayout>
                    <GridLayout row="4" columns="*,*" colSpan="2"
                        visibility="{{ reservation.tableReady ? 'collapsed' : 'visible' }}">
                        <Button class="fa btn btn-active button-direction button-white" text="&#xf041;   Directions"
                            (tap)="openMaps(reservation)"></Button>
                        <Button col="1" class="fa btn btn-primary btn-active button-white button-in"
                            text="&#xf058;  Checked In"></Button>
                        <Button col="1" class="fa btn btn-primary btn-active button-white button-out"
                            text="&#xf058; Check In" (tap)="checkIt(reservation)"
                            visibility="{{ reservation.checkedIn ? 'collapsed' : 'visible' }}"></Button>

                    </GridLayout>

                    <Button row="5" colspan="2" class="fa btn btn-primary btn-active button-white button-in"
                        visibility="{{ reservation.tableReady ? 'visible' : 'collapsed' }}"
                        text="&#xf058;  Checked In"></Button>
                </GridLayout>
            </StackLayout>
        </ng-template>
    </RadListView>

    <ActivityIndicator [busy]="isLoading"></ActivityIndicator>
</GridLayout>
